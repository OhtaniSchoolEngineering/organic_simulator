# タスク: 有機化学シミュレーターの機能拡張

ユーザーの要望に基づき、以下の機能を実装する。大規模な改修となるため、フェーズを分けて実装を行う。

## フェーズ1: 基礎データ拡張と表示・補助機能
このフェーズでは、新しい原子の追加と、構造式の作成・理解を助ける表示機能を実装する。

- [ ] **ハロゲン原子の実装** <!-- id: 0 -->
    - [ ] `VALENCY` 定数に Cl, Br, I を追加
    - [ ] パントリー（フッター）にハロゲン原子のドラッグアイテムを追加
- [ ] **水素充填機能の実装** <!-- id: 1 -->
    - [ ] 「水素を充填」ボタンの追加（ワンクリックで全ての空き手にHを追加）
    - [ ] 「見込み水素充填モード」の実装（空き手に半透明のHを自動表示）
    - [ ] 見込み水素へのドラッグ＆ドロップ対応（上書き配置）
- [ ] **官能基強調モードの実装** <!-- id: 2 -->
    - [ ] 官能基検出アルゴリズムの実装（大きい官能基を優先）
    - [ ] 検出された官能基を視覚的に強調表示（背景色付きコンテナ等）
    - [ ] トグルボタンの設置

## フェーズ2: 反応シミュレーション機能
このフェーズでは、分子に対して化学反応を適用するインタラクティブな機能を実装する。

- [ ] **反応モードUIの実装** <!-- id: 3 -->
    - [ ] 通常モード、付加反応、脱水、酸化などのモード切替UI
- [ ] **付加反応の実装** <!-- id: 4 -->
    - [ ] 試薬選択（H2, HCl, Cl2, H2O）
    - [ ] 二重・三重結合へのクリック/ドロップでの反応ロジック
- [ ] **脱水反応の実装** <!-- id: 5 -->
    - [ ] HとOHの選択UI
    - [ ] 脱水後の二重結合生成ロジック
- [ ] **酸化反応の実装** <!-- id: 6 -->
    - [ ] アルコール → アルデヒド/ケトン → カルボン酸の反応ロジック

## フェーズ3: 構造最適化機能
- [ ] **直鎖検知と整形機能** <!-- id: 7 -->
    - [ ] 主鎖（最長炭素鎖）の検出アルゴリズム
    - [ ] 折れ曲がり検知と警告表示
    - [ ] 「伸ばす」アクションによる座標再計算
